- name: "copy necessary config files"
  block:
    - name: "cp kubeadm-config.yaml"
      ansible.builtin.template:
        src: "{{ inventory_dir }}/resources/kubeadm-config.yaml.j2"
        dest: "{{ hostvars.localhost.kubeadm_config }}"
    - name: "copy kube-vip static pod manifest"
      become: true
      block:
        - ansible.builtin.file:
            path: /etc/kubernetes/manifests 
            state: directory
        - ansible.builtin.template:
            src: "{{ inventory_dir }}/resources/kube-vip-static-pod.yaml.j2"
            dest: "/etc/kubernetes/manifests/kube-vip.yaml"
